<script src="node_modules/chart.js/src/chart.js"></script>

<div class="container">
    <h1 class="page-header">Organization statistics</h1>
    
    <div>
        <div class="panel panel-default">
            <div class="panel-body">
                <h4 class="muted">Період</h4>
                <div class="col-md-6">
                    <div class="input-daterange input-group" id="datepicker">
                        <span class="input-group-addon" id="basic-addon1">Від: </span>
                        <input type="date" class="input-sm form-control no-spin" #startDate onkeydown="return false" (input)="setBeginDate(startDate.value)" [value]="dateFrom | date:'yyyy-MM-dd'" min="2000-01-01" max="{{inputMaxDate | date:'yyyy-MM-dd'}}" />
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="input-daterange input-group" id="datepicker">
                        <span class="input-group-addon" id="basic-addon1">До: </span>
                        <input type="date" class="input-sm form-control no-spin" #endDate onkeydown="return false" (input)="setEndDate(endDate.value)" [value]="dateTo | date:'yyyy-MM-dd'" min="2000-01-01" max="{{inputMaxDate | date:'yyyy-MM-dd'}}" />
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="col-md-10 col-md-offset-1">
        <div class="row" *ngFor="let target of allTargets">
            <button type="button" class="baseTargetDiv" data-toggle="collapse" [attr.data-target]="'#' + target.id" (click)="onClickBaseTarget(target)">
                <strong>{{target.targetName}}  {{target.sum | number : '1.2-2'}} ₴</strong>
            </button>
            <div [attr.id]="target.id" class="collapse">
                <div *ngFor="let subTarget of target.subTargetsArray">
                    <button type="button" class="subTargetDiv" data-toggle="collapse" [attr.data-target]="'#sub' + subTarget.id">
                        <strong>{{subTarget.targetName}}  {{subTarget.sum | number : '1.2-2'}} ₴</strong>
                    </button>
                    <!--<div [attr.id]="'sub' + subTarget.id" class="collapse">
                        <div *ngFor="let finOp of subTarget.finOpsArray">
                            {{finOp.id}} {{finOp.amount}} {{finOp.description}}
                        </div> 
                    </div> -->
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="col-md-4 chart-container">
            <ngx-charts-bar-vertical [scheme]="colorScheme"
                                     [results]="dataSet"
                                     [gradient]="gradient"
                                     [xAxis]="showXAxis"
                                     [yAxis]="showYAxis"
                                     [legend]="showLegend"
                                     [showXAxisLabel]="showXAxisLabel"
                                     [showYAxisLabel]="showYAxisLabel"
                                     [xAxisLabel]="xAxisLabel"
                                     [yAxisLabel]="yAxisLabel"
                                     [barPadding]="barPadding"
                                     (select)="onSelect($event)">
            </ngx-charts-bar-vertical>
        </div>
        <div class="col-md-8 chart-container">
            <ngx-charts-advanced-pie-chart [scheme]="colorScheme"
                                           [results]="dataSet"
                                           [gradient]="gradient"
                                           (select)="onSelect($event)">

            </ngx-charts-advanced-pie-chart>
        </div>
    </div>
</div>